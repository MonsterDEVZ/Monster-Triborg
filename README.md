# Monster Triborg Bot ü§ñ

–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π Telegram-–±–æ—Ç-–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä –¥–ª—è **Monster Agency**, **Monster CG** –∏ **Monster Express**.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **Deep Linking**: –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∫–ª–∏–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `/start`
- **–°–≤–µ—Ä—Ö–±—ã—Å—Ç—Ä—ã–µ –≤–æ—Ä–æ–Ω–∫–∏**: 2 —à–∞–≥–∞ –¥–æ –∑–∞—è–≤–∫–∏
- **–£–º–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å–∞
- **Follow-up —Å–∏—Å—Ç–µ–º–∞**: –°–±–æ—Ä –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (—Å—Å—ã–ª–∫–∏, –¢–ó, —Ä–µ—Ñ–µ—Ä–µ–Ω—Å—ã)
- **–ï–¥–∏–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: Core + Apps –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Monster-Triborg/
‚îú‚îÄ‚îÄ packages/core/              # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (—è–¥—Ä–æ)
‚îÇ   ‚îú‚îÄ‚îÄ handlers/              # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ start.py          # Deep Linking + Fallback
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ callbacks.py      # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–æ–∫
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ followup.py       # Follow-up —Å–æ–æ–±—â–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ states/               # FSM States
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user_states.py
‚îÇ   ‚îî‚îÄ‚îÄ utils/                # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ       ‚îú‚îÄ‚îÄ config.py         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ       ‚îî‚îÄ‚îÄ locales.py        # –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ apps/bot/                  # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îî‚îÄ‚îÄ main.py               # –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ locales/                   # –ö–æ–Ω—Ç–µ–Ω—Ç
‚îÇ   ‚îî‚îÄ‚îÄ locales.json          # –¢–µ–∫—Å—Ç—ã –≤—Å–µ—Ö –≤–æ—Ä–æ–Ω–æ–∫
‚îú‚îÄ‚îÄ .env.example              # –®–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ requirements.txt          # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python3 -m venv venv
source venv/bin/activate  # macOS/Linux
# –∏–ª–∏
venv\Scripts\activate  # Windows

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —à–∞–±–ª–æ–Ω .env
cp .env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ –¥–æ–±–∞–≤—å—Ç–µ:
# BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
# ADMIN_CHAT_ID=–≤–∞—à_chat_id
```

**–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –±–æ—Ç–∞?**
1. –ù–∞–ø–∏—à–∏—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot` –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –≤ `.env`

**–ö–∞–∫ —É–∑–Ω–∞—Ç—å ADMIN_CHAT_ID?**
1. –ù–∞–ø–∏—à–∏—Ç–µ [@userinfobot](https://t.me/userinfobot)
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à ID –≤ `.env`

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–æ—Ç–æ –¥–ª—è –≤–æ—Ä–æ–Ω–æ–∫

–í —Ñ–∞–π–ª–µ `locales/locales.json` –∑–∞–º–µ–Ω–∏—Ç–µ placeholder'—ã –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ file_id —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π:

```json
{
  "agency": {
    "step1": {
      "photo_id": "AgACAgIAAxkBAAI..."  // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π file_id
    }
  }
}
```

**–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å file_id —Ñ–æ—Ç–æ?**
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ –±–æ—Ç—É [@userinfobot](https://t.me/userinfobot)
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `file_id` –∏–∑ –æ—Ç–≤–µ—Ç–∞
3. –í—Å—Ç–∞–≤—å—Ç–µ –≤ `locales.json`

–ò–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∑–∞–≥–ª—É—à–∫–∏ (–∫–∞–∫ —Å–µ–π—á–∞—Å).

### 4. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
# –ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
python3 apps/bot/main.py
```

–í—ã —É–≤–∏–¥–∏—Ç–µ:
```
üöÄ Monster Triborg Bot –∑–∞–ø—É—â–µ–Ω!
üìã Admin Chat ID: 123456789
```

## üîó Deep Linking

### –ü—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

- **Monster Agency**: `https://t.me/–í–ê–®_–ë–û–¢?start=agency`
- **Monster CG**: `https://t.me/–í–ê–®_–ë–û–¢?start=cg`
- **Monster Express**: `https://t.me/–í–ê–®_–ë–û–¢?start=express`

### Fallback (–±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞):
- `https://t.me/–í–ê–®_–ë–û–¢` ‚Äî –ø–æ–∫–∞–∂–µ—Ç –º–µ–Ω—é –≤—ã–±–æ—Ä–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## üìä –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–∞–±–æ—Ç—ã

### –ü—Ä–æ—Ñ–∏–ª—å 1: Monster Agency (`start=agency`)

**–®–∞–≥ 1: –í–∏–∑—É–∞–ª—å–Ω–∞—è –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ñ–æ—Ç–æ —Å –∫–Ω–æ–ø–∫–∞–º–∏:
  - üìà –ü—Ä–∏–≤–ª–µ—á—å –∫–ª–∏–µ–Ω—Ç–æ–≤
  - üí∞ –£–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–æ–¥–∞–∂–∏
  - üéØ –£–ª—É—á—à–∏—Ç—å —Ä–µ–∫–ª–∞–º—É

**–®–∞–≥ 2: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏ –æ–±–æ–≥–∞—â–µ–Ω–∏–µ**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç—Å—è @username
- –ó–∞—è–≤–∫–∞ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –∞–¥–º–∏–Ω-—á–∞—Ç
- –ë–æ—Ç –ø—Ä–æ—Å–∏—Ç —Å—Å—ã–ª–∫—É –Ω–∞ —Å–∞–π—Ç/—Å–æ—Ü—Å–µ—Ç–∏

### –ü—Ä–æ—Ñ–∏–ª—å 2: Monster CG (`start=cg`)

**–®–∞–≥ 1: –í–∏–∑—É–∞–ª—å–Ω–∞—è –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è**
- ü§ñ AI-–≤–∏–¥–µ–æ
- ‚ú® –°–ø–µ—Ü—ç—Ñ—Ñ–µ–∫—Ç—ã (VFX)
- üßä –ö–æ–º–ø—å—é—Ç–µ—Ä–Ω–∞—è –≥—Ä–∞—Ñ–∏–∫–∞ (CG)

**–®–∞–≥ 2: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ**
- –ó–∞—è–≤–∫–∞ –≤ –∞–¥–º–∏–Ω-—á–∞—Ç
- –ë–æ—Ç –ø—Ä–æ—Å–∏—Ç —Ä–µ—Ñ–µ—Ä–µ–Ω—Å—ã

### –ü—Ä–æ—Ñ–∏–ª—å 3: Monster Express (`start=express`)

**–®–∞–≥ 1: –í–∏–∑—É–∞–ª—å–Ω–∞—è –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è**
- üíª –°–∞–π—Ç / –õ–µ–Ω–¥–∏–Ω–≥
- üé¨ –ë–∞–Ω–Ω–µ—Ä-–∞–Ω–∏–º–∞—Ü–∏—è
- ‚ú® AI-–≤–∏–¥–µ–æ

**–®–∞–≥ 2: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ**
- –ó–∞—è–≤–∫–∞ –≤ –∞–¥–º–∏–Ω-—á–∞—Ç
- –ë–æ—Ç –ø—Ä–æ—Å–∏—Ç –¢–ó (–≤ —Ç–µ—á–µ–Ω–∏–µ 15 –º–∏–Ω—É—Ç)

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Python 3.10+**
- **aiogram 3.13.1** ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å Telegram Bot API
- **python-dotenv** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- **MemoryStorage** ‚Äî FSM —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–¥–ª—è MVP)
- **black** ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

## üìù –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

–í—Å–µ —Ç–µ–∫—Å—Ç—ã, –∫–Ω–æ–ø–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `locales/locales.json`. –í—ã –º–æ–∂–µ—Ç–µ –ª–µ–≥–∫–æ –∏–∑–º–µ–Ω—è—Ç—å:
- –¢–µ–∫—Å—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π
- –ù–∞–∑–≤–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫
- –®–∞–±–ª–æ–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ID —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

–ü—Ä–∏–º–µ—Ä:
```json
{
  "agency": {
    "step1": {
      "caption": "–í–∞—à –Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç –∑–¥–µ—Å—å",
      "buttons": [
        {
          "text": "üî• –ù–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞",
          "callback_data": "agency_new"
        }
      ]
    }
  }
}
```

## üé® –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

```bash
# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤
black .

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
black --check .
```

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Production

### –í–∞—Ä–∏–∞–Ω—Ç 1: VPS/Dedicated Server

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ supervisor –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
sudo apt install supervisor

# –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo nano /etc/supervisor/conf.d/monster-bot.conf
```

```ini
[program:monster-bot]
directory=/path/to/Monster-Triborg
command=/path/to/venv/bin/python apps/bot/main.py
user=youruser
autostart=true
autorestart=true
stderr_logfile=/var/log/monster-bot.err.log
stdout_logfile=/var/log/monster-bot.out.log
```

```bash
sudo supervisorctl reread
sudo supervisorctl update
sudo supervisorctl start monster-bot
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Docker

```dockerfile
FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

CMD ["python", "apps/bot/main.py"]
```

```bash
docker build -t monster-bot .
docker run -d --env-file .env monster-bot
```

### –î–ª—è Production: –ó–∞–º–µ–Ω–∏—Ç–µ MemoryStorage –Ω–∞ Redis

–í `apps/bot/main.py`:

```python
from aiogram.fsm.storage.redis import RedisStorage
storage = RedisStorage.from_url("redis://localhost:6379/0")
```

## üêõ Troubleshooting

**–ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `BOT_TOKEN` –≤ `.env`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω (`python3 apps/bot/main.py`)

**–ó–∞—è–≤–∫–∏ –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ –∞–¥–º–∏–Ω-—á–∞—Ç:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `ADMIN_CHAT_ID` –≤ `.env`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ —á–∞—Ç (–¥–ª—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–æ–≤)

**–§–æ—Ç–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è:**
- –ó–∞–º–µ–Ω–∏—Ç–µ `photo_id` –≤ `locales.json` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ file_id

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –¥–ª—è –ª—é–±—ã—Ö —Ü–µ–ª–µ–π.

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

Created with ‚ù§Ô∏è for Monster Corp by Claude Code
